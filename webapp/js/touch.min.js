!function(e){function t(e,t,n,o){return Math.abs(e-t)>=Math.abs(n-o)?e-t>0?"Left":"Right":n-o>0?"Up":"Down"}function n(){c=null,m.last&&(m.el.trigger("longTap"),m={})}function o(){c&&clearTimeout(c),c=null}function a(){s&&clearTimeout(s),u&&clearTimeout(u),l&&clearTimeout(l),c&&clearTimeout(c),s=u=l=c=null,m={}}function i(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function r(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,u,l,c,p,m={},d=750;e(document).ready(function(){var g,h,v,f,w=0,$=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(m.el.trigger("swipe"),m.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(!(f=r(t,"down"))||i(t))&&(v=f?t:t.touches[0],t.touches&&1===t.touches.length&&m.x2&&(m.x2=void 0,m.y2=void 0),g=Date.now(),h=g-(m.last||g),m.el=e("tagName"in v.target?v.target:v.target.parentNode),s&&clearTimeout(s),m.x1=v.pageX,m.y1=v.pageY,h>0&&250>=h&&(m.isDoubleTap=!0),m.last=g,c=setTimeout(n,d),p&&f&&p.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(f=r(e,"move"))||i(e))&&(v=f?e:e.touches[0],o(),m.x2=v.pageX,m.y2=v.pageY,w+=Math.abs(m.x1-m.x2),$+=Math.abs(m.y1-m.y2))}).on("touchend MSPointerUp pointerup",function(n){(!(f=r(n,"up"))||i(n))&&(o(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30?l=setTimeout(function(){m.el.trigger("swipe"),m.el.trigger("swipe"+t(m.x1,m.x2,m.y1,m.y2)),m={}},0):"last"in m&&(30>w&&30>$?u=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=a,m.el.trigger(t),m.isDoubleTap?(m.el&&m.el.trigger("doubleTap"),m={}):s=setTimeout(function(){s=null,m.el&&m.el.trigger("singleTap"),m={}},250)},0):m={}),w=$=0)}).on("touchcancel MSPointerCancel pointercancel",a),e(window).on("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto);